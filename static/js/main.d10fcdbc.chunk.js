(window.webpackJsonpimage_processing=window.webpackJsonpimage_processing||[]).push([[0],{21:function(e,t,a){e.exports=a(39)},26:function(e,t,a){},32:function(e,t){},33:function(e,t){},34:function(e,t){},35:function(e,t){},36:function(e,t){},37:function(e,t){},39:function(e,t,a){"use strict";a.r(t);var n=a(3),i=a.n(n),o=a(19),r=a.n(o),s=a(7),c=a(8),l=a(11),d=a(9),m=a(12),g=(a(26),window.cv);function h(e,t,a){console.log(g),this.image=document.getElementById(e),this.file=document.getElementById(t),this.canvas=a}h.prototype.addListener=function(){this.file.addEventListener("change",this.loadData.bind(this),!1)},h.prototype.loadData=function(e){e.target.files[0]&&(this.image.src=URL.createObjectURL(e.target.files[0]),this.loadImageToCanvas())},h.prototype.removeListener=function(){this.file.removeEventListener("change",this.loadData.bind(this),!1)},h.prototype.negativeCanvas=function(){this.loadOriginalCanvas();for(var e=document.getElementById("image_canvas"),t=e.getContext("2d"),a=t.getImageData(0,0,e.width,e.height),n=a.data,i=0;i<n.length;i+=4)n[i]=255-n[i],n[i+1]=255-n[i+1],n[i+2]=255-n[i+2];t.putImageData(a,0,0)},h.prototype.logTransform=function(){this.loadOriginalCanvas();for(var e=document.getElementById("image_canvas"),t=e.getContext("2d"),a=t.getImageData(0,0,e.width,e.height),n=a.data,i=0;i<n.length;i+=4)n[i]=200*Math.log10(n[i]+1),n[i+1]=200*Math.log10(n[i+1]+1),n[i+2]=200*Math.log10(n[i+2]+1);t.putImageData(a,0,0)},h.prototype.flip=function(e,t){var a=document.getElementById("image_canvas"),n=a.getContext("2d"),i=(n.getImageData(0,0,a.width,a.height),a.width),o=a.height,r=e?-1:1,s=t?-1:1,c=e?-1*i:0,l=t?-1*o:0;n.save(),n.scale(r,s),n.drawImage(this.image,c,l,i,o),n.restore()},h.prototype.contrastCanvas=function(e){this.loadOriginalCanvas();for(var t=e,a=document.getElementById("image_canvas"),n=a.getContext("2d"),i=n.getImageData(0,0,a.width,a.height),o=i.data,r=128*(1-(t=t/100+1)),s=0;s<o.length;s+=4)o[s]=o[s]*t+r,o[s+1]=o[s+1]*t+r,o[s+2]=o[s+2]*t+r;n.putImageData(i,0,0)},h.prototype.brightnessCanvas=function(e){this.loadOriginalCanvas();var t=document.getElementById("image_canvas"),a=t.getContext("2d"),n=a.getImageData(0,0,t.width,t.height);a.filter="brightness(".concat(e,"%)"),a.putImageData(n,0,0)},h.prototype.loadImageToCanvas=function(){this.image.onload=function(){var e=document.getElementById("image_canvas");e.getContext("2d").drawImage(this,0,0,e.width,e.height)}},h.prototype.loadOriginalCanvas=function(){var e=document.getElementById("image_canvas");e.getContext("2d").drawImage(this.image,0,0,e.width,e.height)},h.prototype.grayscale=function(){var e=g.imread(this.image);g.cvtColor(e,e,g.COLOR_RGB2GRAY),g.imshow("image_canvas",e),e.delete()},h.prototype.filter=function(){var e=g.imread(this.image),t=new g.Mat,a=g.Mat.eye(3,3,g.CV_32FC1),n=new g.Point(-1,-1);g.filter2D(e,t,g.CV_8U,a,n,0,g.BORDER_DEFAULT),g.imshow("image_canvas",t),e.delete(),t.delete(),a.delete()},h.prototype.cannyEdgeDetection=function(){this.loadOriginalCanvas();var e=g.imread(this.image),t=new g.Mat;g.cvtColor(e,e,g.COLOR_RGB2GRAY,0),g.Canny(e,t,50,100,3,!1),g.imshow("image_canvas",t),e.delete(),t.delete()},h.prototype.houghLineTransformation=function(){this.loadOriginalCanvas();var e=g.imread(this.image),t=g.Mat.zeros(e.rows,e.cols,g.CV_8UC3),a=new g.Mat;g.cvtColor(e,e,g.COLOR_RGBA2GRAY,0),g.Canny(e,e,50,200,3),g.HoughLines(e,a,1,Math.PI/180,30,0,0,0,Math.PI);for(var n=0;n<a.rows;++n){var i=a.data32F[2*n],o=a.data32F[2*n+1],r=Math.cos(o),s=Math.sin(o),c=r*i,l=s*i,d={x:c-1e3*s,y:l+1e3*r},m={x:c+1e3*s,y:l-1e3*r};g.line(t,d,m,[255,0,0,255])}g.imshow("image_canvas",t),e.delete(),t.delete(),a.delete()},h.prototype.dft=function(){this.loadOriginalCanvas();var e=g.imread(this.image);g.cvtColor(e,e,g.COLOR_RGBA2GRAY,0);var t=g.getOptimalDFTSize(e.rows),a=g.getOptimalDFTSize(e.cols),n=g.Scalar.all(0),i=new g.Mat;g.copyMakeBorder(e,i,0,t-e.rows,0,a-e.cols,g.BORDER_CONSTANT,n);var o=new g.Mat;i.convertTo(o,g.CV_32F);var r=new g.MatVector,s=new g.Mat,c=new g.Mat.zeros(i.rows,i.cols,g.CV_32F);r.push_back(o),r.push_back(c),g.merge(r,s),g.dft(s,s),g.split(s,r),g.magnitude(r.get(0),r.get(1),r.get(0));var l=r.get(0),d=new g.Mat.ones(l.rows,l.cols,l.type());g.add(l,d,l),g.log(l,l);var m=new g.Rect(0,0,-2&l.cols,-2&l.rows),h=(l=l.roi(m)).cols/2,u=l.rows/2,v=new g.Mat,p=new g.Rect(0,0,h,u),f=new g.Rect(h,0,h,u),w=new g.Rect(0,u,h,u),y=new g.Rect(h,u,h,u),C=l.roi(p),_=l.roi(f),E=l.roi(w),b=l.roi(y);C.copyTo(v),b.copyTo(C),v.copyTo(b),_.copyTo(v),E.copyTo(_),v.copyTo(E),g.normalize(l,l,0,1,g.NORM_MINMAX),g.imshow("image_canvas",l),e.delete(),i.delete(),r.delete(),s.delete(),d.delete(),v.delete()},h.prototype.otsu=function(){this.loadOriginalCanvas(),console.log(g);var e=g.imread(this.image);g.cvtColor(e,e,g.COLOR_RGB2GRAY,0);var t=new g.Mat;g.threshold(e,t,0,12,g.THRESH_OTSU),g.imshow("image_canvas",t),e.delete(),t.delete()},h.prototype.blurByAveraging=function(){var e=g.imread(this.image),t=new g.Mat,a=new g.Size(10,10),n=new g.Point(-1,-1);g.blur(e,t,a,n,g.BORDER_DEFAULT),g.imshow("image_canvas",t),e.delete(),t.delete()},h.prototype.gaussianBlur=function(){var e=g.imread(this.image),t=new g.Mat,a=new g.Size(3,3);g.GaussianBlur(e,t,a,0,0,g.BORDER_DEFAULT),g.imshow("image_canvas",t),e.delete(),t.delete()},h.prototype.medianBlurring=function(){var e=g.imread(this.image),t=new g.Mat;g.medianBlur(e,t,5),g.imshow("image_canvas",t),e.delete(),t.delete()},h.prototype.negative=function(){var e=g.imread(this.image),t=new g.Mat;g.bitwise_not(e,t),g.imshow("image_canvas",t),e.delete(),t.delete()},h.prototype.histogram=function(){var e=g.imread(this.image);g.cvtColor(e,e,g.COLOR_RGBA2GRAY,0);var t=new g.MatVector;t.push_back(e);var a=[256],n=new g.Mat,i=new g.Mat,o=new g.Scalar(255,255,255);g.calcHist(t,[0],i,n,a,[0,255],!1);for(var r=g.minMaxLoc(n,i).maxVal,s=new g.Mat.zeros(e.rows,2*a[0],g.CV_8UC3),c=0;c<a[0];c++){var l=n.data32F[c]*e.rows/r,d=new g.Point(2*c,e.rows-1),m=new g.Point(2*(c+1)-1,e.rows-l);g.rectangle(s,d,m,o,g.FILLED)}g.imshow("image_canvas",s),e.delete(),s.delete(),t.delete(),i.delete(),n.delete()},h.prototype.crop=function(){var e=g.imread(this.image),t=new g.Mat,a=new g.Rect(80,80,100,100);t=e.roi(a),g.imshow("image_canvas",t),e.delete(),t.delete()},h.prototype.action=function(e,t){if(""!=this.image.src)switch(e){case"Original":this.loadOriginalCanvas();break;case"Grayscale":this.grayscale();break;case"Median Blur":this.medianBlurring();break;case"Gaussian Blur":this.gaussianBlur();break;case"Blur By Average":this.blurByAveraging();break;case"Canny Edge Detection":this.cannyEdgeDetection();break;case"Hough Line Transformation":this.houghLineTransformation();break;case"Discrete Fourier Transformation":this.dft();break;case"Otsu's Segmentation":this.otsu();break;case"Histogram":this.histogram();break;case"Filter":this.filter();break;case"Crop":this.crop();break;case"Negative":this.negativeCanvas();break;case"Contrast":this.contrastCanvas(t);break;case"Logarithm Transform":this.logTransform();break;case"Brightness":this.brightnessCanvas(t);break;case"Flip Horizontal":case"Mirror":this.flip(!0,!1);break;case"Flip Vertical":this.flip(!1,!0);break;case"Flip Horizontal and Vertical":this.flip(!0,!0)}};var u=h,v=["Original","Grayscale","Canny Edge Detection","Hough Line Transformation","Discrete Fourier Transformation","Face Detection","Otsu's Segmentation","Filter","Negative","Median Blur","Gaussian Blur","Blur By Average","Histogram","Mirror","Crop","Logarithm Transform","Flip Horizontal","Flip Vertical","Flip Horizontal and Vertical"],p=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){if("Face Detection"==e.target.value)return console.log("Detect Faces"),0;a.ocv.action(e.target.value)},a.handleSlider=function(e,t){console.log(e.target.value,t),a.ocv.action(t,e.target.value)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.ocv=new u("image_input","file_input","image_canvas"),this.ocv.addListener()}},{key:"componentWillUnmount",value:function(){this.ocv.removeListener()}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{id:"app_container"},i.a.createElement("div",{className:"image_closet"},i.a.createElement("img",{id:"image_input"}),i.a.createElement("video",{id:"video",width:"300",height:"300",style:{display:"none"}}),i.a.createElement("input",{type:"file",id:"file_input"})),i.a.createElement("div",{className:"canvas_ground"},i.a.createElement("div",{className:"canvas"},i.a.createElement("canvas",{id:"image_canvas"}),i.a.createElement("div",null,i.a.createElement("label",null,"Brightness"),i.a.createElement("input",{type:"range",min:"0",max:"300",className:"slider",id:"myRange",onChange:function(t){return e.handleSlider(t,"Brightness")}})),i.a.createElement("div",null,i.a.createElement("label",null,"Contrast"),i.a.createElement("input",{type:"range",min:"-100",max:"100",className:"slider",id:"myRange",onChange:function(t){return e.handleSlider(t,"Contrast")}}))),i.a.createElement("div",{className:"image_processing"},i.a.createElement("h1",null,"Image Processing"),i.a.createElement("div",{className:"action_menu"},v.map((function(t,a){return i.a.createElement("div",{key:a},i.a.createElement("input",{type:"radio",name:"action",value:t,onChange:e.handleChange}),i.a.createElement("label",null,t))}))))))}}]),t}(i.a.Component),f=a(13),w=a.n(f),y=a(20),C=a(4),_={display:"flex",flexDirection:"coloumn",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},E=function(){return i.a.createElement("div",{id:"camera",style:_},i.a.createElement("video",{id:"video",width:"720",height:"560",autoPlay:!0,muted:!0}))},b=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.startDetection()}},{key:"render",value:function(){return i.a.createElement(E,null)}}]),t}(i.a.Component);b.prototype.startDetection=function(){var e=document.getElementById("video");Promise.all([C.f.tinyFaceDetector.loadFromUri("/models"),C.f.faceLandmark68Net.loadFromUri("/models"),C.f.faceRecognitionNet.loadFromUri("/models"),C.f.faceExpressionNet.loadFromUri("/models")]).then((function(){navigator.getUserMedia({video:{}},(function(t){return e.srcObject=t}),(function(e){return console.error(e)}))})),e.addEventListener("play",(function(){var t=C.b(e);t.setAttribute("id","face-detection-canvas"),document.getElementById("camera").append(t);var a={width:e.width,height:e.height};C.e(t,a),setInterval(Object(y.a)(w.a.mark((function n(){var i,o;return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C.c(e,new C.a);case 2:i=n.sent,o=C.g(i,a),t.getContext("2d").clearRect(0,0,t.width,t.height),C.d.drawDetections(t,o);case 6:case"end":return n.stop()}}),n)}))),100)}))};r.a.render(i.a.createElement(p,null),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.d10fcdbc.chunk.js.map